<div class="flex flex-auto flex-col space-y-1">
    <biopro-process-header
        [subTitle]="header.subTitle | async"
        [title]="header.title | async"
        [buttons]="actionButtonsTpl"
    />
    <ng-template #actionButtonsTpl>
        <div class="flex flex-row space-x-2">
            <biopro-action-button
                id="submitBtn"
                btnId="submitActionBtn"
                [disabled]="packedProductsData.length < 0"
                label="Submit"
                color="primary"
                icon="heroicons_outline:paper-airplane"
                (clickEvent)="backToShipment()"
            ></biopro-action-button>
        </div>
    </ng-template>

    <div class="flex w-full flex-row gap-4 p-4">
        <div class="flex w-9/12 flex-col gap-4">
            <div class="flex w-full flex-col space-y-3">
                <fuse-card class="flex flex-col space-y-2">
                    <div class="w-full">
                        <biopro-scan-unit-number-product-code
                            #scanUnitNumberProductCode
                            (validate)="enterAndVerifyProduct($event)"
                        ></biopro-scan-unit-number-product-code>
                    </div>
                </fuse-card>

                <fuse-card
                    class="mb-4 flex flex-col px-4 pb-4"
                    id="filledProduct-container"
                >
                    <div class="mb-2 mt-2 flex flex-row justify-between">
                        <div class="flex items-center text-lg font-bold">
                            <span>
                                Filled Products (
                                <span id="numberOfProductsAdded">{{
                                    packedProductsData.length
                                }}</span>
                                of
                                <span id="prodQtyId">{{
                                    totalProductsComputed()
                                }}</span
                                >)
                            </span>
                        </div>
                    </div>
                    <mat-divider></mat-divider>
                    <div
                        id="optionButtons"
                        class="grid max-h-[520px] grid-cols-4 gap-4 overflow-auto pb-4 pt-4"
                    >
                        @for (option of packedProductsData; track $index) {
                            <biopro-unit-number-card
                                [id]="'unit-' + $index"
                                class="max-h-24"
                                [unitNumber]="option.unitNumber"
                                [productName]="option.productCode"
                                [disableActive]="false"
                                [iconName]="getItemIcon(option)"
                            ></biopro-unit-number-card>
                        }
                    </div>
                </fuse-card>
            </div>
        </div>
        <div class="flex w-1/4 flex-col gap-8">
            <biopro-shipping-carton-information-card
                [showBasicButton]="false"
                [shippingInput]="shipmentDetailsSignal()"
                [cartonInput]="cartonDetailsSignal()"
            />
            <biopro-shipping-information-card
                [showBasicButton]="false"
                [shippingInput]="shipmentDetailsSignal()"
            />
        </div>
    </div>
</div>
