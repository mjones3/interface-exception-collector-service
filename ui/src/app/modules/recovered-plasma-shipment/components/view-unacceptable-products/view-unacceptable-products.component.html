<div class="relative" mat-dialog-title>
    <button
        title="Close"
        class="absolute top-0 right-0 pr-6 pt-6"
        mat-icon-button
        mat-dialog-close
    >
        <mat-icon svgIcon="close"></mat-icon>
    </button>
</div>
<div id="viewUnacceptableProductsReport" class="h-full mx-6 mb-6 overflow-auto" style="font-family: sans-serif;">
    <div class="flex flex-col gap-4">
        @if (reportModel(); as report) {
            <h2 class="text-3xl text-blue-900 border-b-2 border-b-blue-700">{{ report.reportTitle }}</h2>

            @if (report?.failedProducts?.length) {
                <table
                    id="unacceptableProductsTable"
                    class="w-full grid-borders"
                >
                    <thead>
                    <tr>
                        <th class="text-xl text-center font-bold" colSpan="5">
                            <div class="my-5">Shipment Number: {{ report.shipmentNumber }}</div>
                        </th>
                    </tr>
                    <tr class="bg-blue-100">
                        <th class="font-bold">Unit Number</th>
                        <th class="font-bold">Product Code</th>
                        <th class="font-bold">Carton Number</th>
                        <th class="font-bold">Carton Sequence</th>
                        <th class="font-bold">Reason for Failure</th>
                    </tr>
                    </thead>

                    <tbody>
                        @for (product of report?.failedProducts; track $index) {
                            <tr class="even:bg-blue-50">
                                <td class="text-center">{{ product?.unitNumber }}</td>
                                <td class="text-center">{{ product?.productCode }}</td>
                                <td class="text-center">{{ product?.cartonNumber }}</td>
                                <td class="text-center">{{ product?.cartonSequenceNumber }}</td>
                                <td class="text-center">{{ product?.failureReason }}</td>
                            </tr>
                        }
                    </tbody>
                </table>
            } @else {
                <div class="flex flex-row gap-2 items-center">
                    <mat-icon>check</mat-icon><h3 id="viewUnacceptableProductsNoProductsFlaggedMessage" class="font-bold">{{ report?.noProductsFlaggedMessage }}</h3>
                </div>
            }
        }
    </div>
</div>
<div class="fixed inset-x-0 bottom-0 mb-12 text-center">
    <biopro-action-button
        id="viewUnacceptableProductsReportPrintBtn"
        btnId="viewUnacceptableProductsReportPrintBtnId"
        label="Print"
        icon="hi_outline:printer"
        (clickEvent)="print()"
        class="opacity-75 hover:opacity-100 transition-opacity"
    />
</div>
