<mat-form-field class="block w-full" [id]="dateRangeId">
    <mat-label>{{ title }}</mat-label>
    <mat-date-range-input
        [rangePicker]="dateRangePicker"
        [formGroup]="formGroup"
        [max]="maxDate"
    >
        <input
            matStartDate
            [formControlName]="dateFromFormControlName"
            placeholder="Start date"
            [id]="dateRangeId + 'From'"
        />
        <input
            matEndDate
            [formControlName]="dateToFormControlName"
            placeholder="End date"
            [id]="dateRangeId + 'To'"
        />
    </mat-date-range-input>

    <mat-datepicker-toggle
        matIconSuffix
        [for]="dateRangePicker"
    ></mat-datepicker-toggle>
    <mat-date-range-picker #dateRangePicker></mat-date-range-picker>
</mat-form-field>
<!-- Display errors for invalid start date -->
@if (
    formGroup.get(dateFromFormControlName)?.hasError('matDatepickerParse') &&
    formGroup.get(dateFromFormControlName)?.touched
) {
    <mat-error>Invalid start date</mat-error>
}
<!-- Display errors for invalid end date -->
@if (
    formGroup.get(dateToFormControlName)?.hasError('matDatepickerParse') &&
    formGroup.get(dateToFormControlName)?.touched
) {
    <mat-error>Invalid end date</mat-error>
}
<!-- Display errors for invalid date range (start date after end date) -->
@if (
    formGroup.get(dateToFormControlName)?.hasError('matEndDateInvalid') &&
    (formGroup.get(dateFromFormControlName)?.touched ||
        formGroup.get(dateToFormControlName)?.touched)
) {
    <mat-error>Start date must be before end date</mat-error>
}

@if (
    formGroup.get(dateToFormControlName)?.hasError('matDatepickerMax') &&
    (formGroup.get(dateFromFormControlName)?.touched ||
        formGroup.get(dateToFormControlName)?.touched)
) {
    <mat-error>End date cannot be greater than today</mat-error>
}
