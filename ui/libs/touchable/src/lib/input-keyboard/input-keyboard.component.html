<div class="flex">
  <div class="flex gt-xs:items-baseline w-full" [formGroup]="form">
    <!-- Label -->
    <label class="mr-4 font-bold" *ngIf="labelTitle" [ngClass]="[labelWidth || '']">{{ labelTitle | translate }}</label>

    <!-- Input Section Wrapper -->
    <div class="flex flex-col flex-1 h-full">
      <div class="flex flex-col">
        <!-- Input/TextArea/Keyboard Wrapper -->
        <div class="flex flex-1 h-full">
          <div class="relative flex flex-col h-full" [ngClass]="[inputWidth ? inputWidth : 'w-full']">
            <!-- Input -->
            <mat-form-field
              class="flex-auto treo-mat-no-subscript"
              [class.highlight]="!!highlightField"
              [ngClass]="[inputWidth]"
              rsaControlErrorContainer
            >
              <input
                *ngIf="inputType === inputTypeEnum.TEXT"
                matInput
                formControlName="input"
                rsaMaskRegex
                [id]="inputId"
                [placeholder]="placeholder | translate"
                [autocomplete]="allowAutocomplete"
                [tabindex]="tabindex"
                [allowedCharsRegex]="regex"
                [class]="{ 'input-uppercase': upperCase }"
                [customErrors]="customErrors"
                [attr.maxLength]="maxLength ? maxLength : null"
                [(rsaAutoFocusIf)]="inputFocus"
                [required]="required"
                (keydown.Tab)="onTabEnterPressed()"
                (keydown.Enter)="onEnter($event)"
                (keyup)="onKeyUp($event)"
                (blur)="onBlur()"
                #inputField
              />

              <!-- Text Area -->
              <textarea
                *ngIf="inputType === inputTypeEnum.TEXTAREA"
                matInput
                formControlName="input"
                [id]="inputId"
                [rows]="textareaRows"
                [maxLength]="maxLength"
                [placeholder]="placeholder | translate"
                [tabindex]="tabindex"
                [customErrors]="customErrors"
                [class]="{ 'input-uppercase': upperCase }"
                [(rsaAutoFocusIf)]="inputFocus"
                (keydown.Tab)="onTabEnterPressed()"
                (keydown.Enter)="onEnter($event)"
                (blur)="onBlur()"
                #inputField
              ></textarea>
              <ng-template [ngTemplateOutlet]="suffixTemplateRef"></ng-template>
              <mat-icon *ngIf="iconName" matSuffix [svgIcon]="iconName"></mat-icon>
            </mat-form-field>
          </div>

          <!-- Keyboard Trigger -->
          <div
            *ngIf="showKeyboard"
            class="flex h-full"
            [ngClass]="[inputType === inputTypeEnum.TEXTAREA ? 'flex-col justify-end' : '']"
          >
            <button
              type="button"
              class="ml-2 keyboard-btn"
              mat-stroked-button
              (click)="displayOnScreenKeyboard()"
              tabindex="-1"
              [disabled]="disabled"
              [ngClass]="{ 'w-10 h-10': inputType === inputTypeEnum.TEXTAREA }"
            >
              <mat-icon class="icon-size-20" [svgIcon]="':keyboard'"></mat-icon>
            </button>
          </div>
        </div>

        <!-- Characters Counter -->
        <mat-hint
          [ngClass]="[inputWidth ? inputWidth : 'mr-12']"
          class="text-right"
          *ngIf="inputType === inputTypeEnum.TEXTAREA && maxLength"
        >
          {{ form.controls['input'].value?.trim().length }} / {{ maxLength }}
        </mat-hint>
      </div>
    </div>
  </div>
</div>
