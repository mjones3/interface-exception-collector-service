<mat-form-field class="w-full">
  <mat-label>
    <span [ngStyle]="style">{{ label | translate }}</span>
    <span *ngIf="showSelectedCount && selectedCount" class="selected-count">{{ selectedCount + ' Selected' }}</span>
  </mat-label>
  <mat-select
    [(ngModel)]="selectedOptions"
    [required]="required"
    [multiple]="multiple"
    [compareWith]="compareCategoryObjects"
    #selectList="ngModel"
    (selectionChange)="onSelectionChange($event)"
  >
    <div *ngIf="showSearch" class="flex flex-row w-full justify-between p-4">
      <mat-form-field class="search-region w-full">
        <input
          matInput
          id="searchList"
          class="w-full"
          type="text"
          [(ngModel)]="searchRegionValue"
          (ngModelChange)="onChange($event)"
          (keydown)="$event.stopPropagation()"
          placeholder="Enter Search Criteria"
        />
      </mat-form-field>
    </div>
    <mat-select-trigger>
      <ng-container *ngIf="selectedOptions && isSelectedOptionList">
        <span class="text-part" *ngFor="let text of selectedText; let i = index">
          {{ text | translate }}
        </span>
      </ng-container>

      <span *ngIf="selectedOptions && !isSelectedOptionList && selectedOption_.description_key">{{
        selectedOption_.description_key | translate
      }}</span>
      <span
        *ngIf="selectedOptions && !isSelectedOptionList && !selectedOption_.description_key"
        [innerHTML]="selectedOption_.description_html_tag"
      ></span>
    </mat-select-trigger>
    <mat-option
      *ngIf="showSelectAll"
      #selectAllOption
      [value]="allOption"
      (click)="checkAllOptions(selectAllOption.selected)"
    >
      {{ allOption.descriptionKey | translate }}
    </mat-option>
    <mat-option
      [value]="option"
      [disabled]="!!option.disabled"
      [style.display]="option.visible ? 'flex' : 'none'"
      *ngFor="let option of filteredOptions"
      (click)="checkOneOption()"
    >
      <div class="text-content" *ngIf="!!option.description_key; else htmlContent">
        {{ option.description_key | translate }}
      </div>
      <ng-template #htmlContent>
        <div class="htmlContent" [innerHTML]="option.description_html_tag">{{ option.description_html_tag }}</div>
      </ng-template>
    </mat-option>
  </mat-select>
  <mat-error *ngIf="showError && selectList.hasError('required')" class="self-start mb-2">{{
    label | validation: validationType.REQUIRED
  }}</mat-error>
</mat-form-field>
